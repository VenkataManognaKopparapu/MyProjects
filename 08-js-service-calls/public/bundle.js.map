{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/state.js","webpack://08-js-service-calls/./src/view.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/app.js"],"sourcesContent":["export function checkSession() {\r\n  return fetch('/api/session')\r\n    .catch(() => Promise.reject({ error: 'network-error' }))\r\n    .then(response => {\r\n      if(!response.ok) {\r\n        return Promise.reject({ error: 'auth-missing' });\r\n      }\r\n      return response.json();\r\n    });\r\n }\r\n \r\n export function fetchLogin(username) {\r\n  return fetch('/api/session', {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ username }),\r\n  })\r\n  .catch(() => Promise.reject({ error: 'network-error' }))\r\n  .then(response => {\r\n    if(!response.ok) {\r\n      return response.json().then(err => Promise.reject(err));\r\n    }\r\n    return response.json();\r\n  });\r\n }\r\n \r\n export function logout() {\r\n  return fetch('/api/session', {\r\n    method: 'DELETE',\r\n  })\r\n  .catch(() => Promise.reject({ error: 'network-error' }));\r\n }\r\n \r\n export function getWord() {\r\n  return fetch('/api/word')\r\n    .catch(() => Promise.reject({ error: 'network-error' }))\r\n    .then(response => {\r\n      if(!response.ok) {\r\n        return Promise.reject({ error: 'auth-missing' });\r\n      }\r\n      return response.json();\r\n    });\r\n }\r\n \r\n export function updateWord(word) {\r\n  return fetch('/api/word', {\r\n    method: 'PUT', \r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ word }),\r\n  })\r\n  .catch(() => Promise.reject({ error: 'network-error' }))\r\n  .then(response => {\r\n    if(!response.ok) {\r\n      return response.json().then(err => Promise.reject(err));\r\n    }\r\n    return response.json();\r\n  });\r\n }","const state = {\r\n    username: '',\r\n    word: '',\r\n    error: '',\r\n  };\r\n  \r\n  export function login(username) {\r\n    state.username = username;\r\n    state.error = '';\r\n  }\r\n  \r\n  export function logout() {\r\n    state.username = '';\r\n    state.word = '';\r\n    state.error = '';\r\n  }\r\n  \r\n  export function setWord(word) {\r\n    state.word = word;\r\n  }\r\n  \r\n  export function setError(error) {\r\n    state.error = error;\r\n  }\r\n  \r\n  export default state;","import state from './state';\r\n\r\nconst MESSAGES = {\r\n  'network-error': 'There was a problem connecting to the network, please try again',\r\n  'auth-missing': 'Your session has expired, please login again',\r\n  'required-username': 'Please enter a valid username',\r\n  'auth-insufficient': 'Invalid username, please enter valid username',\r\n  'invalid-username': 'Username can only contain letters, numbers, and underscores',\r\n  default: 'Something went wrong, please try again',\r\n};\r\n\r\nfunction render() {\r\n  const app = document.querySelector('#app');\r\n  if(!state.username) {\r\n    app.innerHTML = renderLogin();\r\n    return;\r\n  }\r\n  app.innerHTML = renderWord();\r\n}\r\n\r\nfunction renderLogin() {\r\n  return `\r\n    <div class=\"login\">\r\n      <form class=\"login-form\">\r\n        <label>Username: <input name=\"username\"></label> \r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n      ${state.error ? `<div class=\"error\">${MESSAGES[state.error] || MESSAGES.default}</div>` : ''}\r\n    </div>\r\n  `;\r\n}\r\n\r\nfunction renderWord() {\r\n  return `\r\n    <div class=\"word-panel\">\r\n      <p class=\"welcome-message\">Welcome <span class=\"username-highlight\">${state.username}</span></p>\r\n      <div class=\"word-display\">Current word: ${state.word}</div>\r\n      <form class=\"word-form\">\r\n        <input name=\"word\" \r\n        placeholder=\"Enter new word\">\r\n        <button type=\"submit\">Update Word</button>\r\n      </form>\r\n      <button class=\"logout\">Logout</button>\r\n      ${state.error ? `<div class=\"error\">${MESSAGES[state.error] || MESSAGES.default}</div>` : ''}\r\n    </div>\r\n  `;\r\n}\r\n\r\nexport { render };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { \r\n    checkSession, \r\n    fetchLogin as loginService,\r\n    logout as logoutService,\r\n    getWord,\r\n    updateWord,\r\n  } from './services';\r\n  import state, { \r\n    login,\r\n    logout,\r\n    setWord,\r\n    setError,\r\n  } from './state';\r\n  import { render } from './view';\r\n  \r\n  checkSession()\r\n    .then(({ username }) => {\r\n      login(username);\r\n      return getWord();\r\n    })\r\n    .then(({ storedWord }) => {\r\n      setWord(storedWord);\r\n      render();\r\n    })\r\n    .catch(() => {\r\n      render();\r\n    });\r\n  \r\n  document.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    if(e.target.classList.contains('login-form')) {\r\n      const username = e.target.elements.username.value.trim();\r\n      if(!username) {\r\n        setError('required-username');\r\n        render();\r\n        return;\r\n      }\r\n      const validUsernameRegex = /^[A-Za-z0-9_]+$/;\r\n      if(!validUsernameRegex.test(username)) {\r\n      setError('invalid-username');\r\n      render();\r\n      return;\r\n     }\r\n      loginService(username)\r\n        .then(({ username }) => {\r\n          login(username);\r\n          return getWord();\r\n        })\r\n        .then(({ storedWord }) => {\r\n          setWord(storedWord);\r\n          render();\r\n        })\r\n        .catch(err => {\r\n          setError(err.error);\r\n          render();\r\n        });\r\n    }\r\n  \r\n    if(e.target.classList.contains('word-form')) {\r\n      const word = e.target.elements.word.value;\r\n      updateWord(word)\r\n        .then(({ storedWord }) => {\r\n          setWord(storedWord);\r\n          render();\r\n        })\r\n        .catch(err => {\r\n          setError(err.error);\r\n          render();\r\n        });\r\n    }\r\n  });\r\n  \r\n  document.addEventListener('click', (e) => {\r\n    if(e.target.classList.contains('logout')) {\r\n      logoutService()\r\n        .then(() => {\r\n          logout();\r\n          render();\r\n        })\r\n        .catch(err => {\r\n          setError(err.error);\r\n          render();\r\n        });\r\n    }\r\n  });"],"names":["checkSession","fetch","Promise","reject","error","then","response","ok","json","fetchLogin","username","method","headers","body","JSON","stringify","err","logout","getWord","updateWord","word","state","login","setWord","setError","MESSAGES","render","app","document","querySelector","innerHTML","renderLogin","renderWord","concat","loginService","logoutService","_ref","_ref2","storedWord","addEventListener","e","preventDefault","target","classList","contains","elements","value","trim","validUsernameRegex","test","_ref3","_ref4","_ref5"],"sourceRoot":""}